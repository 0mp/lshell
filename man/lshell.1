.\"
.\"   $Id: lshell.1,v 1.8 2009-01-27 00:25:03 ghantoos Exp $
.\"
.\"   Man page for the Limited Shell (lshell) project.
.\"
.TH LSHELL 1 "January 27, 2009" "v0.2.4" "USER COMMANDS"

.SH NAME
lshell \- Limited Shell

.SH SYNOPSIS
.B lshell 
[\fIOPTION\fR] [\fIFILE\fR]

.SH DESCRIPTION
\fBlshell\fR provides a limited shell configured per user.
The configuration is done quite simply using a configuration file.
Coupled with ssh's 
.I authorized_keys 
or with
.I /etc/shells
and 
.I /etc/passwd
, it becomes very easy to restrict user's access to a limited set of command.

.SH OPTIONS
.TP
.B \--config=\fIFILE\fR
Select config file (default is /etc/lshell.conf)
.TP
.B \--log=\fIFILE\fR
Specify the log file to use
.TP
.B \-h, --help
Show help message
.TP
.B \--version
Show version

.SH CONFIGURATION
\fBlshell\fR configuration has 3 parts: \fB[global]\fR, \fB[default]\fR and
\fB[myuser]\fR:
.RS
.ft 3
.nf
.sp
[global]   -> lshell system configuration
[default]  -> lshell default user configuration
[blah]     -> user "blah" specific configuration
.ft
.LP
.RE
.fi

.SS [global]
.TP
.I logfile
Config filename
.TP
.I history
History filename (located in $HOME of the user)
.SS [default] and/or [username]
.TP
.I allowed
a list of the allowed commands
.TP
.I forbidden
a list of forbidden character or commands
.TP
.I warning_counter
number of warnings when user enters a forbidden value before getting exited from lshell.
.TP
.I timer
a value in seconds for the session timer
.TP
.I passwd
password of specific user (default is empty)
.TP
.I path
list of path to restrict the user geographicaly
.TP
.I home_path
set the home folder of your user. If not specified, the home directory is set to the $HOME environment variable
.TP
.I env_path
update the environment variable $PATH of the user (optional)
.TP
.I scp
1 or 0 to allow of forbid the use of scp connection
.TP
.I sftp
1 or 0 to allow of forbid the use of sftp connection
.TP
.I overssh
list of command allowed to execute over ssh (e.g. rsync, rdiff-backup, scp, etc.)

.SH EXAMPLES
.TP
.B $ lshell
.RS
Tries to un lshell using default /etc/lshell.conf as configuration file. If it 
fails a warning is printed and lshell is interrupted.
Tries to un lshell using default /var/log/lshell.conf as log file. If it fails
a warning is printed and lshell is continues runing.
.RE
.TP
.B $ lshell --config /path/to/myconf.file --log /path/to/mylog.log
.RS
This will override the default options specified for configuration and/or log file
.RE

.SH TODO
.TP
In order to log a user's warnings into the default \fI/var/log/lshell.log\fR file, you must add the user to the \fIlshellg\fR group:

$ usermod -G lshellg user_name
.TP
In order to set lshell as default shell for a user:

$ chsh -s /usr/bin/lshell user_name

.SH AUTHOR
Currently maintained by Ignace Mouzannar -ghantoos- 

.SH EMAIL
Feel free to send me your recommendations at <ghantoos@ghantoos.org>
